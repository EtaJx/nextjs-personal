```
title: Go常量以及变量
date: 2018-07-05 21:09:05
tags:
- Go
categories:
- Go
```

### 常量

使用**const**定义，用于存储不会改变的数据。

1. 存储在常量中的数据类型只可以是布尔型、数字型（整数型、浮点型和复数）和字符串型。

2. 可以省略类型说明符`[type]`，编译器可以根据变量的值来推断类型。

3. 常量的值必须是在编译时就能够确定的。因为在编译期间自定义函数均属于未知，因此无法用于常量的赋值，但内置函数可以使用

4. 数字型的常量是没有大小和符号的，并且可以使用任何精度而不会溢出。

5. 常量允许使用并行赋值：

   ```go
   const beef, two, c = "eat", 2, "veg"
   const Monday, Tuesdat, Wednesday, Thursday, Friday, Saturday = 1, 2, 3, 4, 5, 6
   const (
     Monday, Tuesday, Wednesday = 1, 2, 3
     Thursday, Friday, Saturday = 4, 5, 6
   )
   
   // 常量还可以用作枚举：
   const (
     Unknown = 0
     Female = 1
     Male = 2
   )
   ```

   

### 变量

1. 当变量声明后，系统自动赋予它类型的零值：int为0，float为0.0，bool为false，string为空字符串，指针为nil，所有的内存在Go中都是经过初始化的。
2. 变量的命名规则遵循驼峰命名法，如果全局变量希望能够被外部包使用，则***需要将首个单词的首字母也大写***。（`可见性原则`）
3. 尽管变量的标识符必须是唯一的，但你可以在某个代码块的内层代码块中使用相同名称的变量，则此时外部的同名变量将会暂时隐藏（结束内部代码块的执行后隐藏的外部同名变量又会出现，而内部同名变量则被释放），你任何的操作都只会影响内部代码块的局部变量。

### 值类型和引用类型

根据不同的处理器以及操作系统类型，所有的字都具有32位（4字节）或64位（8字节）的相同长度；所有的字都使用相关的内存地址来表示（以十六进制数表示）。

1. 像int，float，boolean和string这些基本类型都属于值类型，这些类型的变量直接指向存在内存中的值。
2. ***数组和结构这些复合类型也是值类型***
3. 一个引用类型的变量r1存储的是r1的值所在的内存地址，或内存地址中第一个字所在的位置。这个内存地址被称之为指针，这个指针实际上也被存在另外的某一个字中。同一个引用类型的指针指向的多个字可以是在连续的内存地址中（内存布局是连续的）；也可以将这些字分散存放在内存中，每个字都指示了下一个字所在的内存地址
4. 在Go语言中，指针属于引用类型，其他的引用类型还包括slices，maps和channel。被引用的变量会存储在堆中，以便进行垃圾回收，且比栈拥有更大的内存空间。

### 简短形式，使用:=赋值操作符

***在变量的初始化时省略变量的类型而由系统自动推断***，这个时候可以使用`:=`简写，比如

```go
a := 50 // 等同于 var a = 50
```

这种形式只能***被用在函数体内，而不可以用于全局变量的声明与赋值***。

**注意**：

1. 在相同的代码块中，不可以再次对于相同名称的变量使用初始化声明。这个时候会提示错误`no new variables no left side of :=`

2. 如果在定义变量a前使用它，则会得到编译错误`undefined: a`

3. 如果声明了局部变量却没有在相同的代码块中使用它，尝试编译的时候会得到`a declared and not useded`

4. 全局变量允许声明但不使用

5. 交换两个变量的值

   ```go
   a, b = b, a
   ```

6. 空白标识符`_`也被用于抛弃值，如值`5`在：`_, b = 5, 7`中被抛弃

7. `_`实际上是一个只写变量，不能得到它的值